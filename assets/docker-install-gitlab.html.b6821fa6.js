import{r as l,o as p,c as r,b as a,a as s,w as c,F as o,e as t,d as n}from"./app.d1ef40ff.js";import{_ as b}from"./plugin-vue_export-helper.21dcd24c.js";const u={},d=t(`<h1 id="docker\u5B89\u88C5gitlab" tabindex="-1"><a class="header-anchor" href="#docker\u5B89\u88C5gitlab" aria-hidden="true">#</a> docker\u5B89\u88C5gitlab</h1><div class="custom-container warning"><p class="custom-container-title">\u63D0\u793A</p><p>gitlab\u7684\u5751\u6BD4\u8F83\u5947\u8469\uFF0C\u5982\u679C\u5DF2\u7ECF\u4E86\u89E3\u8FC7\uFF0C\u53EF\u4EE5\u76F4\u63A5\u67E5\u770B<a href="#%E5%AE%8C%E6%95%B4%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE">\u5B8C\u6574\u5B89\u88C5\u6B65\u9AA4</a></p></div><h2 id="\u5B89\u88C5\u8FD0\u884C" tabindex="-1"><a class="header-anchor" href="#\u5B89\u88C5\u8FD0\u884C" aria-hidden="true">#</a> \u5B89\u88C5\u8FD0\u884C</h2><p>\u641C\u7D22gitlab</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> search gitlab
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u62C9\u53D6gitlab\u955C\u50CF\uFF0C\u5176\u4E2Dgitlab-ce\u4E3A\u793E\u533A\u7248\uFF0Cgitlab-ee\u4E3A\u4F01\u4E1A\u7248\uFF0C\u8FD9\u91CC\u6211\u4EEC\u62C9\u53D6\u793E\u533A\u7248\u5373\u53EF</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> pull gitlab/gitlab-ce
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u8FD0\u884Cgitlab-ce\u5BB9\u5668</p><h3 id="\u4F7F\u7528\u9ED8\u8BA4\u7AEF\u53E3\u542F\u52A8gitlab" tabindex="-1"><a class="header-anchor" href="#\u4F7F\u7528\u9ED8\u8BA4\u7AEF\u53E3\u542F\u52A8gitlab" aria-hidden="true">#</a> \u4F7F\u7528\u9ED8\u8BA4\u7AEF\u53E3\u542F\u52A8gitlab</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> run -d --name gitlab <span class="token punctuation">\\</span>
    -p <span class="token number">443</span>:443 -p <span class="token number">80</span>:80 -p <span class="token number">22</span>:22 <span class="token punctuation">\\</span>
    --restart always <span class="token punctuation">\\</span>
    -v /srv/gitlab/etc:/etc/gitlab <span class="token punctuation">\\</span>
    -v /srv/gitlab/log:/var/log/gitlab <span class="token punctuation">\\</span>
    -v /srv/gitlab/opt:/var/opt/gitlab <span class="token punctuation">\\</span>
    gitlab/gitlab-ce
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li><code>-v /srv/gitlab/etc:/etc/gitlab</code> \u914D\u7F6E\u6587\u4EF6\u76EE\u5F55\u6620\u5C04</li><li><code>-v /srv/gitlab/log:/var/log/gitlab</code> \u65E5\u5FD7\u6587\u4EF6\u76EE\u5F55\u6620\u5C04\u5230</li><li><code>-v /srv/gitlab/opt:/var/opt/gitlab</code> \u6570\u636E\u6587\u4EF6\u76EE\u5F55\u6620\u5C04</li></ul><h3 id="\u4F7F\u7528\u975E\u9ED8\u8BA4\u7AEF\u53E3\u542F\u52A8gitlab-\u63A8\u8350" tabindex="-1"><a class="header-anchor" href="#\u4F7F\u7528\u975E\u9ED8\u8BA4\u7AEF\u53E3\u542F\u52A8gitlab-\u63A8\u8350" aria-hidden="true">#</a> \u4F7F\u7528\u975E\u9ED8\u8BA4\u7AEF\u53E3\u542F\u52A8gitlab\uFF08\u63A8\u8350\uFF09</h3><p>\u4F7F\u7528\u9ED8\u8BA4\u7AEF\u53E3\u6211\u4EEC\u7ECF\u5E38\u4F1A\u9047\u5230\u4EE5\u4E0B\u7AEF\u53E3\u5360\u7528\u95EE\u9898\uFF0C\u5373\u4FBF\u6CA1\u6709\u5360\u7528\uFF0C\u4E00\u822C\u4E5F\u4F1A\u9884\u7559\u51FA\u6765\uFF1A</p><ul><li><code>80</code>\u7AEF\u53E3\u4E3Aweb\u670D\u52A1\u7684\u9ED8\u8BA4\u7AEF\u53E3\uFF0Cnginx\u7B49\u670D\u52A1\u90FD\u662F\u4F7F\u7528\u7684\u6B64\u7AEF\u53E3\uFF1B</li><li><code>22</code>\u7AEF\u53E3\u4E3A\u8FDC\u7A0Bssh\u9ED8\u8BA4\u7AEF\u53E3\uFF0C\u57FA\u672C\u4E0ALinux\u670D\u52A1\u5668\u90FD\u4F1A\u5F00\u542F</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> run -d --name gitlab <span class="token punctuation">\\</span>
    -p <span class="token number">443</span>:443 -p <span class="token number">10080</span>:80 -p <span class="token number">222</span>:22 <span class="token punctuation">\\</span>
    --restart always <span class="token punctuation">\\</span>
    -v /srv/gitlab/etc:/etc/gitlab <span class="token punctuation">\\</span>
    -v /srv/gitlab/log:/var/log/gitlab <span class="token punctuation">\\</span>
    -v /srv/gitlab/opt:/var/opt/gitlab <span class="token punctuation">\\</span>
    gitlab/gitlab-ce
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>\u6B64\u65F6\u6211\u4EEC\u5C31\u53EF\u4EE5\u901A\u8FC7\u8BBF\u95EE<code>http://ip:10080</code>\u5730\u5740\u67E5\u770Bgitlab UI\u4E86\uFF0C\u9996\u6B21\u6253\u5F00\u9700\u8981\u4FEE\u6539\u521D\u59CB\u5BC6\u7801\uFF0C\u9ED8\u8BA4\u767B\u5F55\u8D26\u53F7\u4E3A<code>root</code></p><h2 id="\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u914D\u7F6E" aria-hidden="true">#</a> \u914D\u7F6E</h2><h3 id="\u4ED3\u5E93\u5730\u5740" tabindex="-1"><a class="header-anchor" href="#\u4ED3\u5E93\u5730\u5740" aria-hidden="true">#</a> \u4ED3\u5E93\u5730\u5740</h3><p>\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u5F53\u6211\u4EEC\u521B\u5EFA\u4E00\u4E2A\u9879\u76EE\u540E\uFF0C\u5728Clone\u7684\u65F6\u5019\u663E\u793A\u7684\u4ED3\u5E93\u5730\u5740\u4E3A\u5BB9\u5668ID\uFF0C\u8FD9\u663E\u7136\u5728\u5916\u90E8\u662F\u65E0\u6CD5\u8BBF\u95EE\u7684\uFF0C\u9700\u8981\u6539\u6210\u5BBF\u4E3B\u673AIP+\u7AEF\u53E3\u624D\u884C\u3002</p><ul><li>\u67E5\u627Egitlab.rb\u6587\u4EF6</li></ul><ol><li><p>\u5BB9\u5668\u4E2D\u67E5\u627E</p><p>\u5982\u679C\u5BB9\u5668\u6CA1\u6709\u505A<code>\u914D\u7F6E\u6587\u4EF6</code>\u76EE\u5F55\u6620\u5C04\uFF0C\u53EF\u4EE5\u8FDB\u5165\u5BB9\u5668\u4FEE\u6539</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> <span class="token builtin class-name">exec</span> -it gitlab /bin/bash
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u5BB9\u5668\u5185\u7684<code>gitlab.rb</code>\u6587\u4EF6\u8DEF\u5F84\u4E3A<code>/etc/gitlab/gitlab.rb</code></p></li><li><p>\u5BBF\u4E3B\u673A\u67E5\u627E</p><p>\u5982\u679C\u505A\u4E86<code>\u914D\u7F6E\u6587\u4EF6</code>\u76EE\u5F55\u6620\u5C04\uFF0C\u53EF\u4EE5\u76F4\u63A5\u5728\u5BBF\u4E3B\u673A\u4E2D\u627E\u5230\u8BE5\u6587\u4EF6\u4FEE\u6539\u5373\u53EF\uFF0C\u5177\u4F53\u8BF7\u67E5\u770B<code>\u914D\u7F6E\u6587\u4EF6</code>\u6620\u5C04\u76EE\u5F55</p></li></ol><ul><li>\u4FEE\u6539gitlab.rb\u6587\u4EF6</li></ul><p>\u5C06<code>external_url</code>\u53C2\u6570\u8BBE\u7F6E\u4E3A\u5916\u90E8\u4E3B\u673A\u5730\u5740</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u8FD9\u6BB5\u4E3A\u539F\u59CB\u9700\u8981\u4FEE\u6539\u7684\u4EE3\u7801\uFF0C\u627E\u5230\u8BE5\u884C\u4EE3\u7801\u4FEE\u6539</span>
<span class="token comment"># external_url &#39;GENERATED_EXTERNAL_URL&#39;</span>

<span class="token comment"># \u5047\u8BBE\u5BBF\u4E3B\u673AIP\u4E3A\`192.168.222.136\`</span>
<span class="token comment"># \u914D\u7F6Ehttp\u534F\u8BAE\u6240\u4F7F\u7528\u7684\u8BBF\u95EE\u5730\u5740\uFF0C\u8FD9\u91CC\u7AEF\u53E3\u53F7\u4E5F\u6307\u5411\u5185\u90E8\u6620\u5C04\u7AEF\u53E3\u53F7\uFF0C\u6240\u4EE5\u5728\u6620\u5C04\u65F6\u9700\u8981\u6307\u5B9A\u76F8\u540C\u7684\u7AEF\u53E3\u53F7</span>
external_url <span class="token string">&#39;http://192.168.222.136:10080&#39;</span>

<span class="token comment"># \u914D\u7F6Essh\u534F\u8BAE\u6240\u4F7F\u7528\u7684\u8BBF\u95EE\u5730\u5740\u548C\u7AEF\u53E3</span>
gitlab_rails<span class="token punctuation">[</span><span class="token string">&#39;gitlab_ssh_host&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&#39;192.168.222.136&#39;</span>
gitlab_rails<span class="token punctuation">[</span><span class="token string">&#39;gitlab_shell_ssh_port&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">222</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ul><li>\u91CD\u542Fgitlab</li></ul><p>\u4FEE\u6539gitlab.rb\u6587\u4EF6\u540E\uFF0C\u9700\u8981\u91CD\u542Fgitlab\u624D\u4F1A\u751F\u6548</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> restart gitlab
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><blockquote><p><em>\u7B49\u5F85\u91CD\u542F\u6210\u529F\u540E\u518D\u6B21\u8BBF\u95EE<code>http://ip:10080</code>\u5730\u5740\u8BD5\u8BD5\uFF0C\u662F\u4E0D\u662F\u8FDEUI\u90FD\u4E0D\u80FD\u6253\u5F00\u4E86\uFF1F</em></p></blockquote><p>\u5176\u5B9E\u8FD9\u662Fgitlab\u7684\u4E00\u4E2A\u5751\uFF0C\u539F\u56E0\u662F\u4F7F\u7528\u975E\u9ED8\u8BA4http\u7AEF\u53E3<code>80</code>\u6620\u5C04\uFF0C\u5982\u679C\u4FEE\u6539<code>external_url</code>\u5730\u5740\u4E3A<code>http://ip:10080</code>\uFF0C\u76F8\u5F53\u4E8E\u4E5F\u5C06\uFF08\u5BB9\u5668\uFF09\u5185\u90E8\u7684\u7AEF\u53E3\u53F7\u4FEE\u6539\u4E3A<code>10080</code>\u4E86\uFF0C\u800C\u6B64\u65F6\u6620\u5C04\u7684\u7AEF\u53E3\u53F7\u8FD8\u662F<code>80</code>\uFF0C\u81EA\u7136\u5C31\u65E0\u6CD5\u8BBF\u95EE\u4E86</p>`,29),g=n("\u8981\u89E3\u51B3\u6B64\u95EE\u9898\u53EA\u9700\u8981\u628A\u6620\u5C04\u7684\u5BB9\u5668\u7AEF\u53E3\u6539\u4E3A"),h=a("code",null,"10080",-1),m=n("\u3002\u53EF\u4EE5\u901A\u8FC7"),k=n("docker\u5BB9\u5668\u7AEF\u53E3\u6620\u5C04"),v=n("\u4FEE\u6539\u5BB9\u5668\u7AEF\u53E3\u53F7\uFF0C\u6216\u8005\u76F4\u63A5\u79FB\u9664\u5BB9\u5668\u7136\u540E\u91CD\u65B0\u5B89\u88C5\u542F\u52A8"),_=t(`<h2 id="\u5B8C\u6574\u5B89\u88C5\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u5B8C\u6574\u5B89\u88C5\u914D\u7F6E" aria-hidden="true">#</a> \u5B8C\u6574\u5B89\u88C5\u914D\u7F6E</h2><ul><li>\u5B89\u88C5\u542F\u52A8gitlab</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> run -d --name gitlab <span class="token punctuation">\\</span>
    -p <span class="token number">443</span>:443 -p <span class="token number">10080</span>:10080 -p <span class="token number">222</span>:22 <span class="token punctuation">\\</span>
    --restart always <span class="token punctuation">\\</span>
    -v /srv/gitlab/etc:/etc/gitlab <span class="token punctuation">\\</span>
    -v /srv/gitlab/log:/var/log/gitlab <span class="token punctuation">\\</span>
    -v /srv/gitlab/opt:/var/opt/gitlab <span class="token punctuation">\\</span>
    gitlab/gitlab-ce
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>\u4FEE\u6539gitlab.rb</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">vim</span> /srv/gitlab/etc/gitlab.rb
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u914D\u7F6Ehttp\u534F\u8BAE\u6240\u4F7F\u7528\u7684\u8BBF\u95EE\u5730\u5740\uFF0C\u8FD9\u91CC\u7AEF\u53E3\u53F7\u4E5F\u6307\u5411\u5185\u90E8\u6620\u5C04\u7AEF\u53E3\u53F7\uFF0C\u6240\u4EE5\u5728\u6620\u5C04\u65F6\u9700\u8981\u6307\u5B9A\u76F8\u540C\u7684\u7AEF\u53E3\u53F7</span>
external_url <span class="token string">&#39;http://192.168.222.136:10080&#39;</span>

<span class="token comment"># \u914D\u7F6Essh\u534F\u8BAE\u6240\u4F7F\u7528\u7684\u8BBF\u95EE\u5730\u5740\u548C\u7AEF\u53E3</span>
gitlab_rails<span class="token punctuation">[</span><span class="token string">&#39;gitlab_ssh_host&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&#39;192.168.222.136&#39;</span>
gitlab_rails<span class="token punctuation">[</span><span class="token string">&#39;gitlab_shell_ssh_port&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">222</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li>\u91CD\u542Fgitlab</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> restart gitlab
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="\u76F8\u5173\u94FE\u63A5" tabindex="-1"><a class="header-anchor" href="#\u76F8\u5173\u94FE\u63A5" aria-hidden="true">#</a> \u76F8\u5173\u94FE\u63A5</h2>`,9),x={href:"https://www.jianshu.com/p/080a962c35b6",title:"docker\u4E0Bgitlab\u5B89\u88C5\u914D\u7F6E\u4F7F\u7528(\u5B8C\u6574\u7248)",target:"_blank",rel:"noopener noreferrer"},f=n("docker\u4E0Bgitlab\u5B89\u88C5\u914D\u7F6E\u4F7F\u7528(\u5B8C\u6574\u7248)"),E={href:"https://www.cnblogs.com/poloyy/p/13968683.html",title:"Docker - \u89E3\u51B3 gitlab \u5BB9\u5668\u4E0A\u7684\u9879\u76EE\u8FDB\u884C clone \u65F6\uFF0CIP \u5730\u5740\u663E\u793A\u4E00\u4E32\u6570\u5B57\u800C\u4E0D\u662F\u6B63\u5E38 IP \u5730\u5740\u7684\u95EE\u9898",target:"_blank",rel:"noopener noreferrer"},w=n("Docker - \u89E3\u51B3 gitlab \u5BB9\u5668\u4E0A\u7684\u9879\u76EE\u8FDB\u884C clone \u65F6\uFF0CIP \u5730\u5740\u663E\u793A\u4E00\u4E32\u6570\u5B57\u800C\u4E0D\u662F\u6B63\u5E38 IP \u5730\u5740\u7684\u95EE\u9898"),I={href:"https://www.jianshu.com/p/230699d9c183",title:"Docker \u5B89\u88C5 Gitlab\uFF0Cexternal_url\u975E80\u7AEF\u53E3\u65E0\u6CD5\u8BBF\u95EE",target:"_blank",rel:"noopener noreferrer"},D=n("Docker \u5B89\u88C5 Gitlab\uFF0Cexternal_url\u975E80\u7AEF\u53E3\u65E0\u6CD5\u8BBF\u95EE");function L(A,N){const i=l("RouterLink"),e=l("ExternalLinkIcon");return p(),r(o,null,[d,a("p",null,[g,h,m,s(i,{to:"/docker-container-nat/"},{default:c(()=>[k]),_:1}),v]),_,a("ul",null,[a("li",null,[a("p",null,[a("a",x,[f,s(e)])])]),a("li",null,[a("p",null,[a("a",E,[w,s(e)])])]),a("li",null,[a("p",null,[a("a",I,[D,s(e)])])])])],64)}var B=b(u,[["render",L]]);export{B as default};
